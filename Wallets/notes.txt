# Explanation of XPUB, Ledger, and Exchange Usage

## XPUB and Ledger Address Generation

Ledger devices use a **master public key (XPUB)** for each cryptocurrency account.  
- The XPUB is mathematically derived from the private seed stored on the Ledger.  
- From this XPUB, all public addresses for that account can be derived deterministically (following BIP32 / BIP44 standards).  
- This means every deposit or withdrawal address is connected to the Ledger, even if a new address is shown each time.  

**Limitation:**  
- While the XPUB can generate all addresses, most wallet interfaces (including Ledger Live) only reveal the subset of addresses that have been used.  
- Koinly uses the XPUB connection to track transactions. Even if not every individual address is visible in Ledger Live, the XPUB ensures that the full set of transactions and balances can still be matched correctly.  
- As a result, the Ledger wallet balances in Koinly reconcile with blockchain records, even though not every address is directly visible in Ledger Live’s export.  

---

## Use of Bitrue for XDC Transactions

XDC (XinFin) was not supported natively on Ledger or most mainstream exchanges at the time.  
- Bitrue was one of the only liquid exchanges where XDC could be traded.  
- Therefore, to trade XDC, the Ledger account was used to **withdraw XDC to Bitrue**, where it was then sold into USDT or paired against other assets.  
- Example: Ledger withdrawals of ~40,147 XDC were sent to Bitrue (as noted in prior transactions) and later sold for ~3,923 USDT.  

This is why some transactions show movement of XDC from Ledger to Bitrue — Bitrue was the intermediary for trading.  

---

## Use of Bittrex for HBAR Purchases

HBAR (Hedera Hashgraph) was not widely available on major Ledger-compatible exchanges at the time.  
- Bittrex was used as the trading venue to acquire HBAR.  
- The flow was typically: funds (e.g., USDT, BTC, or other crypto) were transferred into Bittrex → used to buy HBAR → then HBAR was withdrawn to the self-custody wallet.  
- This explains how HBAR transactions appear in the Koinly records: the source wallet was Bittrex, not Ledger directly, because Ledger did not support buying HBAR natively.  

---

## Metamask / Uniswap and Related Transfers

- **Initial Funding from Binance**  
  In early May 2021, ETH was withdrawn from **Binance** to the Metamask wallet **0x7DC269…** in two transactions:  
  *0xf6d732… (0.0853 ETH)* and *0x54eec9… (1.8175 ETH)* for a total of about **1.9 ETH**.

- **Attempted Uniswap Swap**  
  On 2021-05-10 a Uniswap v3 trade (**tx 0x4851fb…**) was attempted for **0.075 ETH**,  
  but it **reverted (failed)** and no tokens were purchased. Only ~0.017 ETH was lost in gas fees.

- **Return of Funds to Binance**  
  After the failed trade, the entire balance—**1.873 ETH**—was sent **back to Binance**  
  (**tx 0x8b3c88…**, recorded in Koinly as a Binance deposit).

- **Later Ledger Transfer**  
  In November 2021, ~0.284 ETH arrived from another wallet (**tx 0xc99c30…**)  
  and **0.281 ETH** was then sent back to Binance (**tx 0x032252…**),  
  representing the Ledger → Binance transfer in Koinly.

---

## Summary

- **Ledger & XPUB**  
  Ledger accounts derive every public address from a single master public key (XPUB).  
  *Even if Ledger Live only displays used addresses, Koinly can reconcile all transactions and balances from the XPUB.*  
  This ensures your Koinly reports fully match on-chain activity.

- **Bitrue for XDC Trading**  
  XDC was not supported on most major exchanges or in Ledger Live at the time.  
  *Ledger withdrawals of roughly 40,147 XDC were sent to Bitrue and later sold for about 3,923 USDT.*  
  Bitrue served as the required intermediary for buying or selling XDC.

- **Bittrex for HBAR Purchases**  
  When HBAR was first acquired it was only liquid on a few exchanges.  
  *Funds were sent to Bittrex, HBAR was purchased there, and then withdrawn to self-custody wallets.*  
  That is why Koinly shows HBAR transactions sourced from Bittrex rather than Ledger.

- **Metamask / Uniswap Attempt (May 2021)**  
  *Binance → Metamask:* ~1.9 ETH was deposited to wallet **0x7DC269…** (two transactions).  
  *Failed Trade:* A Uniswap v3 swap of 0.075 ETH (tx 0x4851fb…) **reverted**, so no tokens were exchanged; only ~0.017 ETH gas was spent.  
  *Return to Binance:* Almost all ETH (1.873 ETH, tx 0x8b3c88…) was sent back to Binance shortly after.  
  *Later Transfer:* In November 2021, ~0.284 ETH was received (tx 0xc99c30…) and ~0.281 ETH was sent back to Binance (tx 0x032252…).

- **Key Takeaways for Records**  
  * All deposits and withdrawals reconcile with the Koinly CSV.  
  * “SELF” transactions are internal Ethereum bookkeeping and not separate asset movements.  
  * No Uniswap token purchase occurred—only a gas expense.
